import{R as r,S as e,W as s,X as a,m as i,V as h,C as k,F as b,_ as C,O as _,a0 as l,a1 as d,U as g}from"./@vue-2f237c7b.js";import{_ as M}from"./index-f7af34a6.js";import"./vue-router-e91cc718.js";import"./mitt-f7ef348c.js";import"./vuetify-b250ab63.js";/* empty css             */import"./axios-17b187b0.js";const V={name:"Chats",setup(){const c=ref(!1),n=ref(0),u=ref(""),o=ref([]);return{searchMode:c,newMessages:n,search:u,chats:o}},created(){this.getData()},methods:{openSearch(){this.searchMode=!this.searchMode,this.search="",setTimeout(()=>{this.searchMode&&document.querySelector("#search_field").focus()},400)},getData(){this.$http.get("/static/api/chats.json",{headers:{Authorization:"Bearer: "+localStorage.getItem("token")}}).then(c=>{this.newMessages=c.data.newMessages,this.chats=c.data.chats}).catch(c=>{console.log(c)})}},computed:{computedChats(){return this.chats.filter(n=>n.chatTitle.toLowerCase().includes(this.search.toLowerCase()))}}},S={class:"chats_list"},N={class:"pa-4 pt-1 bg-[--header-bg] h-[100px] d-flex justify-space-between align-center"},T={class:"w-full"},B={key:"title",class:"text-2xl text-white"},L=a("span",{class:"pr-2"},"Chats",-1),j={key:"search",class:"search_field w-full"},D={class:"pa-4 bg-white mt-[-10px] rounded-[--md-radius]"},U=["onClick"],F={class:"d-flex justify-space-between align-center pt-2.5"},Y={class:"d-flex align-center"},q=["src"],z={class:"ml-3"},A={class:"mb-1 text-[1.02rem]"},E={key:0,class:"w-[70%] text-grey text-[0.88rem] text-overflow"},I={key:0},O={key:1,class:"text-grey text-sm"},R={class:"text-right"},W={key:1,class:"h-[28px]"},X={key:2,class:"text-grey text-xs whitespace-nowrap"},G={key:0,class:"text-grey text-center mt-10"},H={key:1,class:"text-grey text-center mt-10"};function J(c,n,u,o,K,m){const p=r("v-badge"),f=r("v-text-field"),v=r("v-icon"),x=r("v-btn"),y=r("v-divider");return e(),s("div",S,[a("div",N,[a("div",T,[i(k,{name:"fade",mode:"out-in"},{default:h(()=>[o.searchMode?(e(),s("div",j,[i(f,{placeholder:"Search...",density:"comfortable",variant:"solo","hide-details":"",class:"mr-4",id:"search_field",modelValue:o.search,"onUpdate:modelValue":n[0]||(n[0]=t=>o.search=t)},null,8,["modelValue"])])):(e(),s("div",B,[o.newMessages?(e(),g(p,{key:0,color:"primary",content:`${o.newMessages} New messages`,inline:""},{default:h(()=>[L]),_:1},8,["content"])):d("",!0)]))]),_:1})]),i(x,{onClick:n[1]||(n[1]=t=>m.openSearch()),color:"primary",variant:"tonal",class:"rounded-[16px]",icon:""},{default:h(()=>[i(v,{class:"primary-icon"},{default:h(()=>[_(l(o.searchMode?"mdi-close":"svg:magnify"),1)]),_:1})]),_:1})]),a("div",D,[(e(!0),s(b,null,C(m.computedChats,(t,w)=>(e(),s("div",{class:"hover:bg-[--hover-bg] cursor-pointer rounded-[5px] px-1.5",onClick:P=>c.$router.push(`/chat/${t.id}`),key:w},[a("div",F,[a("div",Y,[a("img",{src:t.imageUrl,width:"58",height:"58",class:"rounded-full"},null,8,q),a("div",z,[a("p",A,l(t.chatTitle),1),a("div",null,[t.hasMessage?(e(),s("p",E,[t.lastMessage.self?(e(),s("b",I,"You:")):d("",!0),_(" "+l(t.lastMessage.text),1)])):(e(),s("p",O,"No messages"))])])]),a("div",R,[t.unseen?(e(),g(p,{key:0,inline:"",color:"primary",class:"mb-2 translate-x-[3px]",content:t.unseen},null,8,["content"])):(e(),s("div",W,"Â ")),t.hasMessage?(e(),s("p",X,l(t.lastMessage.time),1)):d("",!0)])]),i(y,{class:"mt-2.5",color:"#fff"})],8,U))),128)),o.chats.length&&!m.computedChats.length?(e(),s("div",G,[_(" There is no result for "),a("b",null,'"'+l(o.search)+'"',1),_(". ")])):d("",!0),o.chats.length?d("",!0):(e(),s("div",H," You have not started any chat yet! "))])])}const oe=M(V,[["render",J]]);export{oe as default};
