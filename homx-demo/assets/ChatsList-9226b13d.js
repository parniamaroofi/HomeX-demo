import{_ as k,r,o as e,c as s,a,d as l,w as h,T as b,F as M,b as C,e as _,t as i,f as d,g as m}from"./index-420083dd.js";const T={name:"Chats",setup(){const c=ref(!1),n=ref(0),g=ref(""),o=ref([]);return{searchMode:c,newMessages:n,search:g,chats:o}},created(){this.getData()},methods:{openSearch(){this.searchMode=!this.searchMode,this.search="",setTimeout(()=>{this.searchMode&&document.querySelector("#search_field").focus()},400)},getData(){this.$http.get("/static/api/chats.json",{headers:{Authorization:"Bearer: "+localStorage.getItem("token")}}).then(c=>{this.newMessages=c.data.newMessages,this.chats=c.data.chats}).catch(c=>{console.log(c)})}},computed:{computedChats(){return this.chats.filter(n=>n.chatTitle.toLowerCase().includes(this.search.toLowerCase()))}}},V={class:"chats_list"},N={class:"pa-4 pt-1 bg-[--header-bg] h-[100px] d-flex justify-space-between align-center"},S={class:"w-full"},B={key:"title",class:"text-2xl text-white"},L=a("span",{class:"pr-2"},"Chats",-1),j={key:"search",class:"search_field w-full"},D={class:"pa-4 bg-white mt-[-10px] rounded-[--md-radius]"},F=["onClick"],U={class:"d-flex justify-space-between align-center pt-2.5"},Y={class:"d-flex align-center"},q=["src"],z={class:"ml-3"},A={class:"mb-1 text-[1.02rem]"},E={key:0,class:"w-[70%] text-grey text-[0.88rem] text-overflow"},I={key:0},G={key:1,class:"text-grey text-sm"},H={class:"text-right"},J={key:1,class:"h-[28px]"},K={key:2,class:"text-grey text-xs whitespace-nowrap"},O={key:0,class:"text-grey text-center mt-10"},P={key:1,class:"text-grey text-center mt-10"};function Q(c,n,g,o,R,u){const f=r("v-badge"),p=r("v-text-field"),v=r("v-icon"),x=r("v-btn"),y=r("v-divider");return e(),s("div",V,[a("div",N,[a("div",S,[l(b,{name:"fade",mode:"out-in"},{default:h(()=>[o.searchMode?(e(),s("div",j,[l(p,{placeholder:"Search...",density:"comfortable",variant:"solo","hide-details":"",class:"mr-4",id:"search_field",modelValue:o.search,"onUpdate:modelValue":n[0]||(n[0]=t=>o.search=t)},null,8,["modelValue"])])):(e(),s("div",B,[o.newMessages?(e(),m(f,{key:0,color:"primary",content:`${o.newMessages} New messages`,inline:""},{default:h(()=>[L]),_:1},8,["content"])):d("",!0)]))]),_:1})]),l(x,{onClick:n[1]||(n[1]=t=>u.openSearch()),color:"primary",variant:"tonal",class:"rounded-[16px]",icon:""},{default:h(()=>[l(v,{class:"primary-icon"},{default:h(()=>[_(i(o.searchMode?"mdi-close":"svg:magnify"),1)]),_:1})]),_:1})]),a("div",D,[(e(!0),s(M,null,C(u.computedChats,(t,w)=>(e(),s("div",{class:"hover:bg-[--hover-bg] cursor-pointer rounded-[5px] px-1.5",onClick:W=>c.$router.push(`/chat/${t.id}`),key:w},[a("div",U,[a("div",Y,[a("img",{src:t.imageUrl,width:"58",height:"58",class:"rounded-full"},null,8,q),a("div",z,[a("p",A,i(t.chatTitle),1),a("div",null,[t.hasMessage?(e(),s("p",E,[t.lastMessage.self?(e(),s("b",I,"You:")):d("",!0),_(" "+i(t.lastMessage.text),1)])):(e(),s("p",G,"No messages"))])])]),a("div",H,[t.unseen?(e(),m(f,{key:0,inline:"",color:"primary",class:"mb-2 translate-x-[3px]",content:t.unseen},null,8,["content"])):(e(),s("div",J,"Â ")),t.hasMessage?(e(),s("p",K,i(t.lastMessage.time),1)):d("",!0)])]),l(y,{class:"mt-2.5",color:"#fff"})],8,F))),128)),o.chats.length&&!u.computedChats.length?(e(),s("div",O,[_(" There is no result for "),a("b",null,'"'+i(o.search)+'"',1),_(". ")])):d("",!0),o.chats.length?d("",!0):(e(),s("div",P," You have not started any chat yet! "))])])}const Z=k(T,[["render",Q]]);export{Z as default};
